<table style="margin: auto " >
    <thead>
        <th>Nom</th>
        <th>Bar</th>
        <th>Date</th>
        <th>Capacité</th>
        <th>Cachet</th>
        <th>Genre de musique</th>
    </thead>
    <tbody>
        <tr *ngFor = 'let e of subscribedevents' (click)=openeventsub(e)>
            <td>{{e.nom}}</td>
            <td>{{e.bar.nom}}</td>
            <td>{{e.dateEvent}}</td>
            <td>{{e.bar.capacitemax}}</td>
            <td>{{e.cachetmax}}</td>
            <td>{{e.genre.nom}}</td>
        </tr>
    </tbody>
</table>
<button style="text-align: center" (click)=opensearch()>Recherche</button>
<div *ngIf="visible">
    <form #forme ="ngForm" (ngSubmit)="search()" autocomplete="off">
        <input type="text" placeholder="Nom du bar" name="nom" #nomAction="ngModel" [(ngModel)]= "recherche.bar">
        <br>
        <select name="genre" #genreAction="ngModel" [(ngModel)]= "recherche.genre">
            <option *ngFor = "let g of genres" value="{{g.nom}}">{{g.nom}}</option>
        </select>
        <br>
        <input type="number" placeholder="Cachetmax" name="cachetmax" #cachetmaxAction="ngModel" [(ngModel)]= "recherche.cachetmax">
        <br>
        <input type="number" placeholder="Cachetmin" name="cachetmin" #cachetminAction="ngModel" [(ngModel)]= "recherche.cachetmin">
        <br>
        <input type="date" name="dateEventmax" #datemaxAction="ngModel" [(ngModel)]= "recherche.datemax">
        <br>
        <input type="date" name="dateEventmin" #dateminAction="ngModel" [(ngModel)]= "recherche.datemin">
        <br>
        <input type="number" placeholder="capacitemax" name="capacitemax" #capacitemaxAction="ngModel" [(ngModel)]= "recherche.capacitemax">
        <br>
        <input type="number" placeholder="capacitemin" name="capacitemin" #capaciteminAction="ngModel" [(ngModel)]= "recherche.capacitemin">
        <br>
        <br>
        <br>
        <br>
        <button [disabled]="!forme.form.valid">Search</button> 
    </form>
</div>
<!-- <table style="margin: auto " >
    <thead>
        <th>Nom</th>
        <th>Bar</th>
        <th>Date</th>
        <th>Capacité</th>
        <th>Cachet</th>
        <th>Genre de musique</th>
        <th>S'inscrire</th>
    </thead>
    <tbody>
        <tr *ngFor = 'let e of eventsfiltred' >
            <td (click)=openevent(e)>{{e.nom}}</td>
            <td (click)=openevent(e)>{{e.bar.nom}}</td>
            <td (click)=openevent(e)>{{e.dateEvent}}</td>
            <td (click)=openevent(e)>{{e.bar.capacitemax}}</td>
            <td (click)=openevent(e)>{{e.cachetmax}}</td>
            <td (click)=openevent(e)>{{e.genre.nom}}</td>
            <td><button (click)="inscrire(e)">S'inscrire</button></td>
        </tr>
    </tbody>
</table> -->

<div>
<table mat-table [dataSource]="data">
    <ng-container matColumnDef="nom">
        <th mat-header-cell *matHeaderCellDef>Nom</th>
        <td mat-cell *matCellDef="let e">{{e.nom}}</td>
    </ng-container>
    
    <ng-container matColumnDef="bar">
        <th mat-header-cell *matHeaderCellDef>Bar</th>
        <td mat-cell *matCellDef="let e">{{e.bar.nom}}</td>
    </ng-container>

    <ng-container matColumnDef="capacite">
        <th mat-header-cell *matHeaderCellDef>Capacite</th>
        <td mat-cell *matCellDef="let e">{{e.bar.capacitemax}}</td>
    </ng-container>

    <ng-container matColumnDef="dateEvent">
        <th mat-header-cell *matHeaderCellDef>DateEvent</th>
        <td mat-cell *matCellDef="let e">{{e.dateEvent}}</td>
    </ng-container>

    <ng-container matColumnDef="cachetmax">
        <th mat-header-cell *matHeaderCellDef>Cachetmax</th>
        <td mat-cell *matCellDef="let e">{{e.cachetmax}}</td>
    </ng-container>

    <ng-container matColumnDef="genre">
        <th mat-header-cell *matHeaderCellDef>Genre</th>
        <td mat-cell *matCellDef="let e">{{e.genre.nom}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef= "columnsToDisplay"></tr>
    <tr mat-row *matRowDef= "let myRowData; columns:columnsToDisplay"></tr>
</table>
</div>
<div *ngIf="visibleevent">
    <p>{{event.nom}}</p>
    <p>{{event.bar.nom}}</p>
    <p>{{event.bar.capacitemax}}</p>
    <p>{{event.cachetmax}}</p>
    <p>{{event.genre.nom}}</p>
    <button *ngIf="noninscrit" (click)="inscrire(event)">S'inscrire</button>
</div>
